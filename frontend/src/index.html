<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>flashover</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header" id="sidebarHeader">
        <pre class="logo-expanded" id="logoExpanded">
  __ _           _
 / _| | __ _ ___| |__   _____   _____ _ __
| |_| |/ _` / __| '_ \ / _ \ \ / / _ \ '__|
|  _| | (_| \__ \ | | | (_) \ V /  __/ |
|_| |_|\__,_|___/_| |_|\___/ \_/ \___|_|
        </pre>
        <pre class="logo-collapsed" id="logoCollapsed">
  __
 / _|
| |_
|  _|
|_|
        </pre>
      </div>

      <div class="sidebar-content">
        <!-- Auth Status -->
        <section class="auth-section">
          <h2>Connection</h2>
          <div id="authStatus">
            <button id="loginBtn" class="btn btn-primary">Connect to Strava</button>
          </div>
          <button id="logoutBtn" class="btn btn-secondary" style="display: none; margin-top: 10px;">
            Logout
          </button>
          <button id="syncBtn" class="btn btn-secondary" style="display: none; margin-top: 10px;">
            Sync Activities
          </button>
          <button id="loadMoreBtn" class="btn btn-secondary" style="display: none; margin-top: 10px;">
            Load More Activities
          </button>
          <button id="resetBtn" class="btn btn-warning" style="display: none; margin-top: 10px;">
            Reset Sync (Dev)
          </button>
          <div id="syncStatus" style="margin-top: 10px;"></div>
          <div id="syncProgress" class="sync-progress-bar" style="display: none; margin-top: 10px;">
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-text" id="progressText">0 activities loaded</div>
          </div>
        </section>

        <!-- Gradient Controls -->
        <section class="gradient-section">
          <h2>Color Gradient</h2>

          <div class="gradient-tabs">
            <button id="presetTab" class="gradient-tab active">Presets</button>
            <button id="customTab" class="gradient-tab">Custom</button>
          </div>

          <!-- Preset Gradients -->
          <div id="presetControls" class="gradient-controls active">
            <div class="filter-group">
              <label for="gradientPreset">Preset Gradient</label>
              <select id="gradientPreset" class="filter-input">
                <option value="orange" selected>Orange</option>
                <option value="pinkish">Pinkish</option>
                <option value="blue_red">Blue â†’ Red</option>
                <option value="red">Red</option>
              </select>
            </div>
          </div>

          <!-- Custom Gradient -->
          <div id="customControls" class="gradient-controls">
            <div class="filter-group">
              <label for="minColor">Min Color</label>
              <input type="color" id="minColor" class="color-input" value="#fc4a1a">
            </div>

            <div class="filter-group">
              <label for="midColor">Mid Color</label>
              <input type="color" id="midColor" class="color-input" value="#f7b733">
            </div>

            <div class="filter-group">
              <label for="maxColor">Max Color</label>
              <input type="color" id="maxColor" class="color-input" value="#ffffff">
            </div>

            <div class="filter-group">
              <label for="midpoint">Midpoint Intensity</label>
              <input type="range" id="midpoint" class="slider-input" min="1" max="50" value="10">
              <span id="midpointValue" class="slider-value">10</span>
            </div>
          </div>

          <button id="applyGradient" class="btn btn-secondary">Apply Gradient</button>
        </section>

        <!-- Filters -->
        <section class="filters-section">
          <h2>Filters</h2>

          <div class="filter-group">
            <label for="activityType">Activity Type</label>
            <select id="activityType" class="filter-input">
              <option value="all">All Activities</option>
              <option value="Run">Run</option>
              <option value="Ride">Ride</option>
              <option value="Walk">Walk</option>
              <option value="Hike">Hike</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="startDate">Start Date</label>
            <input type="date" id="startDate" class="filter-input">
          </div>

          <div class="filter-group">
            <label for="endDate">End Date</label>
            <input type="date" id="endDate" class="filter-input">
          </div>

          <button id="applyFilters" class="btn btn-secondary">Apply Filters</button>
        </section>

        <!-- Stats -->
        <section class="stats-section">
          <h2>Statistics</h2>
          <div id="stats" class="stats-content">
            <p>Connect to Strava to see your stats</p>
          </div>
        </section>
      </div>
    </aside>

    <!-- Map Container -->
    <main class="map-container">
      <div id="map"></div>
    </main>
  </div>

  <script type="module" src="/main.ts"></script>
</body>
</html>
